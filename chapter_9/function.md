# 函数

#### **C 语言是如何看待函数的？**

> C 的设计思想是，把函数用作构建块。用来组织程序。

#### **什么是函数？**

> 函数（function）是完成特定任务的独立程序代码单元。

##### **为什么使用函数？**

> - **首先，使用函数可以省去编写重复代码的苦差**。—— 如果程序要多次完成某些任务，那么只需要编写一个合适的函数，就可以在需要时使用这个函数，或者在不同的程序中使用该函数，就像许多程序中使用 putcher() 一样。
> - **其次，即使只完成某项任务一次，也值得使用函数**。因为函数让程序更加模块化，从而提高了程序代码的可读性，更方便后期修改、完善。

##### **函数定义时的注意事项：**

> - 使用描述性的函数名能清楚地表达函数的用途和组织结构。
> - 在动手编写代码之前，仔细考虑一下函数应该完成什么任务，以及函数和程序整体的关系。—— 这样做的好处：
> - 1. 通过函数的功能去倒推函数的“输入和输出”数据，可以让自己更关注在如何实现函数上；
> - 2. 函数虽然是独立的整体，但它也是整个程序整体的一部分。

##### **使用他人定义的函数时：**

> 如果使用他人定义的函数时，如何看待这些函数呢？可以把它们看成一个产品，而我们作为使用者，只需要关心它如何使用，也就是它的“输入和输出值”，把函数看成一个黑盒，不考虑它的实现方式只关心它的使用方式。—— 自己定义时就要考虑实现方式了。

#### **如何了解函数？可以从三个方面去了解**：

1. 如何正确的定义函数？
2. 如何调用函数？
3. 如何建立函数间的通信？

##### **C 声明、调用、定义函数示例**：

```C
#include <stdio.h>
#define NAME "GIGATHINK, INC."
#define ADDRESS "101 Megabuck Plaza"
#define PLACE "Megapolis, CA 94904"
#define WIDTH 40

void starbar(void);     // 函数原型 -- 告诉编译器函数starbar()的类型

int main(void)
{
    starbar();      // 调用函数
    printf("%s\n", NAME);
    printf("%s\n", ADDRESS);
    printf("%s\n", PLACE);
    starbar();      // 调用函数 -- 表明在此处执行函数

    return 0;
}

void starbar(void)      // 定义函数 -- 明确地指定了函数要做什么
{
    int count;

    for (count = 1; count <= WIDTH; count++)
    {
        putchar('*');
    }
    putchar('\n');
}
```

#### **什么是驱动程序？**

> 所谓的驱动程序就是被设计用于测试函数的程序。该程序调用一个函数，如果函数称肤色荣国了测试，就可以安装在一个更重要的程序中使用。

#### **什么是函数类型？**

> 函数类型指的是函数返回值的类型，不是函数参数的类型。
>
> **函数的返回类型指的是函数返回值的类型**。如果返回值的类型与声明的返回类型不匹配，返回值奖杯转换成函数声明的返回类型。

#### 函数签名：

> 函数的返回类型和形参列表构成了函数签名。因此，**函数签名指定了传入函数的值的类型和函数返回值的类型**。

#### **函数原型的优点：**

> 声明函数原型可以让我们避免很多因为大意而遗漏的参数问题。通过提前声明函数的返回值和参数的个数、类型，可以让我们在之后的程序中避免遗漏、错用参数的问题（编译器可以帮我们很好的留意这些问题）。

#### **什么是递归？**

> C语言允许函数调用它自己，这种调用过程称为递归。
> 递归比较适用于“倒序计算”。对于这种问题可以给予简洁的解决方案。
> 递归的缺点：在使用时，递归容易占用大量的资源。因此，在使用时应考虑到这点。
> 递归可以实现的方式理论上循环也可以实现。应与实际情况去选择当前情景下合适的解决方式。

#### **return 关键字**:

> `return`是C语言的一个保留关键字，用于把被调函数的值回传给主调函数。但是，**它只能回传一个值给主调函数**。
>
> 如果想要回传两个值给主调函数，可以使用什么方法呢？**可以使用指针传回两个值**。

#### **什么是指针呢？**

> - 指针是**用于存储变量的地址的**。
> - 从根本上看，**指针**是<u>一个值为内存地址的</u>**变量**（或数据对象）。——正如 char 类型变量的值是字符，int 类型变量的值是整数，指针变量的值是地址。

##### **查找地址运算符 `&`：**

> **&运算符**：一元&运算符**给出变量的存储地址**。如果pooh是变量名，&pooh是变量的地址。可以把地址看作是变量在内存的位置。
>
> 一般注解：后跟一个变量名时，&给出该变量的地址。
>
> 示例：&nurse 表示变量 nurse 的地址。

##### 间接运算符 *：

> 间接运算符就是通过运算一个指针或地址，然后，返回那个地址中存储的值。
>
> **注意事项**：它和乘法运算符，虽然样式一样但用法完全不一样。
>
> 一般注解：后跟一个指针名或地址时，*给出存储在指针指向地址上的值。
>
> 示例：
>
> ```c
> nurse = 22;
> ptr = &nurse;  // 指向 nurse 的指针
> val = *ptr;    // 把 ptr 指向的地址上的值赋给val
> 
> val = nurse;   // 以上的语句实现和这句效果等同，因此，这也是间接运算符名称的由来。
> ```
>
> 执行以上3条语句的最终结果是把22赋给val。

##### 声明指针：

> 先上示例：
>
> ```c
> int * pi;   		// pi 是指向 int 类型变量的指针
> char * pc;			// pc 是指向 char 类型的变量的指针
> float * pf, * pg;		// pf、pg 都是指向 float 类型变量的指针
> ```
>
> - 类型说明符表明了指针所指向对象的类型，星号（*）表明声明的变量是一个指针。int * pi; 声明的意思是 pi 是一个指针，*pi 是 int 类型。
> - *和指针名之间的空格可有可无。通常，程序员在声明时使用空格，在解引用变量时省略空格。
> - 指针实际上是一个新类型，不是整数类型。也因此它有专门的转换说明 %p。所以，一些处理整数的运算符并不适用于指针。如乘法运算……
> - **声明指针变量时必须指定所指向变量类型的原因**：
>   1. 因为不同的变量类型占用不同的存储空间，一些指针操作要求知道操作对象的大小。
>   2. 另外，程序必须要知道储存在指定地址上的数据类型。long 和 float 可能占用相同的存储空间，但是他们存储数字却大相径庭。
>
> ![指针的声明与使用](C:\Users\Administrator\Desktop\C语言特性\声明并使用指针.jpg)

##### 可以给函数传递的变量信息

> **一般而言，可以把变量相关的两类信息传递给函数**。
>
> 第一种形式的函数调用，**传递的是x的值**：
>
> `function1(x);`
>
> 另一种形式的函数调用，**传递的是x的地址**：
>
> `function2(&x);`
>
> 第一种形式**要求函数定义中形式参数必须是一个与x的类型相同的变量**：
>
> `int function1(int num)`
>
> 第二种形式**要求函数定义中的形式参数必须是一个指向正确类型的指针**：
>
> `int function2(int * ptr)`
>
> **如果要计算或处理值，那么使用第一种形式的函数调用**；**如果要在被调函数中改变主调函数的变量，则使用第二种形式的函数调用**。

#### 变量：名称、地址和值

> 通过前面的讨论发现，变量的名称、地址和变量的值之间关系密切。我们来进一步分析。
>
> **编写程序时，可以认为变量有两个属性：名称和值**（还有其他性质，如类型，暂不讨论）。**计算机编译和加载程序后，认为变量也有两个属性：地址和值**。**地址就是变量在计算机内部的名称**。
>
> 在许多语言中，地址都归计算机管，对程序员隐藏。然而在C中，可以通过&运算符访问地址，通过`*`运算符获得地址上的值。例如，&barn表示变量barn的地址，使用函数即可获得变量的数值。例如，`printf("%d\n",barn)`打印barn的值，使用 `*`运算符即可获得存储在地址上的值。如果`pbarn = &barn;`,那么`*pbarn`表示的是存储在`&barn`地址上的值。
>
> **简而言之，普通变量把值作为基本量，把地址作为通过`&`运算符获得的派生量；而指针变量把地址作为基本量，把值作为通过`*`运算符获得的派生量**。
>
> **它们的主要用途是：使用`&、*和指针`可以操纵地址和地址上的内容**。





